<ng-container *ngIf="this.resources && this.resources.length">
    <table class="mat-table list-table">
        <thead>
        <tr class="mat-header-row">
            <th class="mat-header-cell mat-sticky">Name</th>
            <th class="mat-header-cell mat-sticky">Uploaded By</th>
            <th class="mat-header-cell mat-sticky">Updated Date</th>
        </tr>
        </thead>
        <tbody>
        <ng-container *ngFor="let resource of this.resources">
            <tr class="mat-subheader-row" *ngIf="resource.isHeading">
                <td class="mat-subheader-cell" colspan="100%">{{resource.name}}</td>
            </tr>
            <ng-container *ngIf="!resource.isHeading">
                <tr class="mat-row hoverable" [class.selected]="!!resource['selected']" (contextmenu)="onContextMenu($event, resource)">
                    <td class="mat-cell flex-center">
                        <app-file-icon [fileExt]="resource.ext"></app-file-icon>
                        <span>{{resource.name}}</span>
                    </td>
                    <td class="mat-cell">{{resource.uploadedBy}}</td>
                    <td class="mat-cell">{{resource.date.toDate() | date}}</td>
                </tr>
            </ng-container>
        </ng-container>
        </tbody>
    </table>
</ng-container>

<div style="visibility: hidden; position: fixed;"
     [style.left]="contextMenuPosition.x"
     [style.top]="contextMenuPosition.y"
     [matMenuTriggerFor]="contextMenu">
</div>
<mat-menu #contextMenu="matMenu" (closed)="deselectAll()">
    <ng-template matMenuContent let-resource="resource">
        <a mat-menu-item [href]="getOpenUrl(resource)" target="_blank">
            <mat-icon>open_in_new</mat-icon>
            Open in Tab
        </a>
        <button mat-menu-item>
            <mat-icon>save_alt</mat-icon>
            Download
        </button>
        <button mat-menu-item>
            <mat-icon>filter_none</mat-icon>
            Copy Resource Link
        </button>
        <button mat-menu-item>
            <mat-icon fontSet="material-icons-outlined">info</mat-icon>
            Details
        </button>
    </ng-template>
</mat-menu>
